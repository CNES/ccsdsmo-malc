<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">

	<title>MAL/CZMQ - MAL C API</title>

        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">

        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            

            <!-- Main title -->
            <a class="navbar-brand" href="..">MAL C API</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
            
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                
                
                    <li >
                        <a href="..">Home</a>
                    </li>
                
                
                
                    <li >
                        <a href="../tutorial/">Tutorial</a>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">MAL APIs <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../mal_attributes/">Attributes</a>
</li>

                        
                            
<li >
    <a href="../mal_encoding/">Encoding</a>
</li>

                        
                            
<li >
    <a href="../mal_api/">MAL</a>
</li>

                        
                            
<li >
    <a href="../mal_transport/">Transport</a>
</li>

                        
                            
<li >
    <a href="../area/">Area</a>
</li>

                        
                            
<li >
    <a href="../mal_actor/">Actor</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown active">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Transports <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li class="active">
    <a href="./">MAL/CZMQ</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Generators <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                        
                            
<li >
    <a href="../stub_generator/">Stubs generator</a>
</li>

                        
                            
<li >
    <a href="../malbinary_generator/">MalBinary</a>
</li>

                        
                        </ul>
                    </li>
                
                
                
                    <li >
                        <a href="../annexes/">Annexs</a>
                    </li>
                
                
                </ul>
            

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                
                    <li >
                        <a rel="next" href="../mal_actor/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../stub_generator/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                
                
            </ul>
        </div>
    </div>
</div>

        <div class="container">
            
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
    
        <li class="main active"><a href="#malczmq-transport">MAL/CZMQ Transport</a></li>
        
            <li><a href="#malzmq-header">MALZMQ Header</a></li>
        
            <li><a href="#malzmq-context-constructor">MALZMQ context constructor</a></li>
        
            <li><a href="#start-up">Start-up</a></li>
        
            <li><a href="#zloop-behavior">zloop behavior</a></li>
        
            <li><a href="#message-receiving">Message receiving</a></li>
        
            <li><a href="#virtual-function-to-build-uri">Virtual function to build URI</a></li>
        
            <li><a href="#virtual-function-to-create-an-endpoint">Virtual function to create an endpoint</a></li>
        
            <li><a href="#virtual-function-to-send-a-message">Virtual function to send a message</a></li>
        
            <li><a href="#virtual-function-to-create-a-poller">Virtual function to create a poller</a></li>
        
            <li><a href="#virtual-function-to-add-an-endpoint-to-a-poller">Virtual function to add an endpoint to a poller</a></li>
        
            <li><a href="#virtual-function-to-remove-an-endpoint-to-a-poller">Virtual function to remove an endpoint to a poller</a></li>
        
            <li><a href="#virtual-function-to-wait-a-message-on-a-poller">Virtual function to wait a message on a poller</a></li>
        
            <li><a href="#virtual-function-to-delete-a-message">Virtual function to delete a message</a></li>
        
    
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h1 id="malczmq-transport">MAL/CZMQ Transport</h1>
<p>This section describes the implementation of MAL binding to ZMTP transport on CZMQ API.
It is not a description as protocol terms (see the <em>Mission Operations - MAL binding to ZMTP</em> CCSDS book) but as API.</p>
<p>The encoding format of the MAL header is given in the <em>Mission Operations - MAL binding to ZMTP</em> CCSDS book.</p>
<p>Currently a MAL message is transmit in a single ZMQ frame (zframe).</p>
<p>The following sections describe the implementation of the MAL / CZMQ module:</p>
<pre><code>-  MALZMQ header configuration.
-  MALZMQ context constructor.
-  Boot.
-  MAL message reception.
-  Implementation of virtual functions needed by the MAL API.
</code></pre>
<h2 id="malzmq-header">MALZMQ Header</h2>
<p>A class is defined to handle the specificities of MALZMQ header format:</p>
<pre><code>-  MALZMQ version number.
-  Mapping directory.
-  Presence flags for optional MALZMQ header fields.
-  Value of non-present fields.
</code></pre>
<h3 id="constructor">Constructor</h3>
<pre><code class="c">malzmq_header_t *malzmq_header_new(
  malzmq_mapping_directory_t *mapping_directory,
  bool priority_flag, mal_uinteger_t priority,
  bool timestamp_flag, mal_identifier_t *network_zone,
  mal_identifier_t *session_name, mal_identifier_list_t *domain,
  mal_blob_t *authentication_id);
</code></pre>

<p>Parameters</p>
<pre><code>-  `mapping_directory`: Mapping directory to use by encoding, may be null.
-  `priority_flag`: Boolean indicating the presence of the *Priority* field in the MALZMQ header.
-  `priority`: Value of the *Priority* field if it is not present in the MALZMQ header.
-  `timestamp_flag`: Boolean indicating the presence of the *TimeStamp* field in the MALZMQ header.
-  `network_zone`: Value of the *Network Zone* field if it is not present in the MALZMQ header.
    If NULL the *Network Zone* field should be present in the MALZMQ header.
-  `session_name`: Value of the *Session Name* field if it is not present in the MALZMQ header.
    If NULL the *Session Name* field should be present in the MALZMQ header.
-  `domain`: Value of the *Domain* field if it is not present in the MALZMQ header.
    If NULL the *Domain* field should be present in the MALZMQ header.
-  `authentication_id`: Value of the *Authentication Id* field if it is not present in the MALZMQ header.
    If NULL the *Authentication Id* field should be present in the MALZMQ header.
</code></pre>
<h3 id="configuration-parameters">Configuration parameters</h3>
<p>Some MAL header fields can be always identical for a given application.
Transmit their values with each call would be redundant, and thus we can optimize performance by
omitting them in the MALZMQ header. These fields are: <code>PRIORITY</code>, <code>NETWORK_ZONE</code>, <code>SESSION_NAME</code>,
<code>DOMAIN</code>, <code>AUTHENTICATION_ID</code>. The presence of these fields in the header MALZMQ and their potential
overall value is defined in the MALZMQ header constructor.</p>
<p>Another field of the MAL header, <code>TIMESTAMP</code>, can also be omitted in the header MALZMQ. This possible
omission is also defined in the MALZMQ header constructor. There is no replacement value defined for this
field.</p>
<p>It goes without saying that these configuration parameters must be provided in an identical manner to all
entities of the application.</p>
<h3 id="mapping-directory">Mapping directory</h3>
<p>The MAL message header contains several fields whose size can be important: URIs, strings, etc.
To optimize the performance messages exchanged between instances of MAL/CZMQ can contain fields encoded
in smaller scalar types.</p>
<p>To maintain compatibility with the MAL, these encoded fields are systematically converted into their MAL
equivalent when accessed by the user of the MAL API. To allow this transformation, informations must be
maintained in a directory on both sides (consumer and provider).</p>
<p>The purpose of this section is to describe the corresponding API and its use.</p>
<h4 id="principles">Principles</h4>
<p>The mapping directiry maintains a mapping between strings and numeric values. The numerical value is called
<code>MDK</code> for <em>Mapping Key Directory</em>.</p>
<p>The directory allows to find the MDK corresponding to a given string during encoding, and to find the string
corresponding to a  MDK during decoding.</p>
<p>It is not under the responsibility of the MAL/CZMQ to provide a consistent directory to each side of the
interaction. This responsibility relies to the application. The simplest way to achieve this is to provide
a static catalog to all components during the installation of the the application. However, nothing prevents
an application to provide a more dynamic implementation of the directory.</p>
<h4 id="encoding">Encoding</h4>
<p>The encoding of a string under his MDK form is optional, to handle the case where there is no MDK in the
directory for the string to be encoded. This is why the mapping described in 14.3 refers to a type <code>Optional MDK</code>.</p>
<p>The principle of <code>Optional MDK</code> encoding is derived from the String <code>MAL Binary</code> encoding. This encoding
consists normally in the encoding of the string length (typed <code>UInteger</code>), followed by the encoding of the characters
themselves. The <code>Optional MDK</code> encoding converts the 32 bit length field in an Integer value to separately exploit
the sign and the absolute value. The sign describes the nature of the field represented by the absolute value,
a <em>MDK</em> if the sign is negative, or length if the sign is positive. In the second case the characters are encoded after
the length field as in <code>MAL Binary</code> encoding.</p>
<p>An encoded string in its MDK form therefore requires only 4 bytes, representing the negative value of the MDK.
If it is not encoded in its MDK form a chain complies with its <code>MAL Binary</code> encoding form.</p>
<p>The special case of a zero value for the initial Integer corresponds to the <code>MAL Binary</code> encoding of an empty
string. Consequently an MDK must be strictly positive.</p>
<h4 id="api">API</h4>
<p>The directory mapping, typed <code>malzmq_mapping_directory_t</code>, is provided as a functions table.</p>
<pre><code class="c">typedef struct _malzmq_mapping_directory_t malzmq_mapping_directory_t;
struct _malzmq_mapping_directory_t {
  malzmq_md_get_key_fn *get_key_fn;
  malzmq_md_get_string_fn *get_string_fn;
  malzmq_md_put_string_fn *put_string_fn;
};
</code></pre>

<p>Fields:</p>
<pre><code>- `get_key_fn`: Gets the MDK of a string if it exists in the directory.
- `get_string_fn`: Gets the string corresponding to an MDK.
- `put_string_fn`: Adds a string in the directory and return the corresponding MDK.
</code></pre>
<p>Below the detailed interface of these functions.</p>
<pre><code class="c">typedef int malzmq_md_get_key_fn(char *string, unsigned int *key);
</code></pre>

<p>Parameters</p>
<pre><code>    - `string`: String to search for a possible key correspondence. Should not be null.
    - `key`: return value of the matching MDK for the string, if it exists.
</code></pre>
<p>Result:</p>
<pre><code>    - 0: execution valid, the return key can be used.
    - &lt;0: error code, the key parameter is undefined.
</code></pre>
<pre><code class="c">typedef int malzmq_md_get_string_fn(unsigned int key, char **string);
</code></pre>

<p>Parameters</p>
<pre><code>    - `key`: MDK to search for a possible string correspondence.
    - `string`: return value of the matching string for the MDK, if it exists.
     This string is allocated and should be released by free or various specific functions (mal_string_destroy, etc).
</code></pre>
<p>Result:</p>
<pre><code>    - 0: execution valid, the return string can be used.
    - &lt;0: error code, the string parameter is undefined.
</code></pre>
<pre><code class="c">typedef int malzmq_md_put_string_fn(char *string, unsigned int *key);
</code></pre>

<p>Parameters</p>
<pre><code>    - `string`: string for which we want to create a matching key, should not be null.
     The directory must not retain the string beyond this call to allow the caller to release it if necessary.
    - `key`: return value of the matching MDK for the string. Must be strictly positive and strictly less
    than 231. A distinctive value is created if and only if an existing MDK does not exist for this string
    in the directory.
</code></pre>
<p>Result:</p>
<pre><code>    - 0: execution valid, the return key can be used.
    - &lt;0: error code, the string is not registered in the directory and the key parameter is undefined.
</code></pre>
<p>Note:</p>
<p>The directory functions only work on strings (char *), because the different target types <code>mal_string_t</code>,
<code>mal_uri_t</code> and <code>mal_identifier_t</code>, are themselves defined as <code>char*</code>. Otherwise, the catalog should 
provide distinct functions for each of these types.</p>
<h4 id="usage">Usage</h4>
<p>The directory is currently used only for the following header fields: <em>URI from</em>, <em>URI to</em>, <em>Network Zone</em>,
<em>Session Name</em> and <em>Domain</em>.</p>
<p>Using explicitly the directory for selected fields of the body is also possible, but it would break the current
compliance to the MAL binary encoding format of the body.</p>
<h2 id="malzmq-context-constructor">MALZMQ context constructor</h2>
<pre><code class="c">malzmq_ctx_t *malzmq_ctx_new(
  mal_ctx_t *mal_ctx,
  malzmq_mapping_uri_t *mapping_uri,
  char *hostname, char *port, malzmq_header_t *malzmq_header,
  malbinary_encoder_t *encoder, malbinary_decoder_t *decoder,
  bool verbose);
</code></pre>

<p>Parameters</p>
<pre><code>    - `mal_ctx`: MAL context.
    - `mapping_uri`: Processing fonctions to transform MAL URI in ZMQ URI. If this mapping is null, the
    default URI mapping functions are used.
    - `hostname`: IP address used to listen incoming connections.
    - `port`: port used to listen incoming connections.
    - `malzmq_header`: Flags and optional fields. The configuration of the MALZMQ header is global to the
    MALZMQ context.
    - `encoder`: Encoding context used to encode the MAL headers.
    - `decoder`: Decoding context used to decode the MAL headers.
    - `verbose`: Flag allowing to enable/disable the logging traces.
</code></pre>
<p>The constructor performs the following actions:</p>
<pre><code>    - Creating a ZMQ ROUTER socket for accepting connections initiated by other remote MALZMQ
    contexts: `SOCKET_MAL_ROUTER`. The ZMQ URI used is built from `hostname` and `port` parameters,
    and the URI mapping functions.
    - Creating a ZMQ SUB socket for accepting messages published by other remote MALZMQ contexts: 
    `SOCKET_MAL_SUB`. The ZMQ URI used is built from `hostname` and `port` parameters, and the URI
    mapping functions.
    - Creating an `inproc` ZMQ ROUTER socket for communicating with the services registered in the
    context: `SOCKET_Z_ROUTER`.
    - Creating a `zloop` to handle the message routing between the external MALZMQ contexts
    and the internal services.
</code></pre>
<h3 id="uri-mapping-functions">URI mapping functions</h3>
<p>The mapping between MAL URI and ZMQ URI is ensured by 3 functions:</p>
<pre><code>    - The first function, `get_p2p_zm`, takes in parameter the MAL URI of a service and returns the 
    ZMQ URI to bind the ZMQ DEALER listening socket corresponding to the MAL context. For example:
    `malzmq://host:port/service` to `tcp://*:port`.
    - The second function, `get_ps_zmquri`, takes in parameter the MAL URI of a service and returns
    the ZMQ URI to connect the ZMQ SUB listening socket corresponding to the MAL context. For example: 
    `malzmq://host:port/service` to `tcp://host:(port+1)` or `pgm://itf;mcast_addr:(port+1)`.
    - The last function, `get_zmquri_to`, takes in parameter a MAL message to send and returns the 
    corresponding ZMQ URI to the interaction stage and MAL URI of the destination service. 
    For example, if the MAL URI of the destination service is `malzmq://host1:port1/service`:
      - for `MAL_INTERACTIONTYPE_INVOKE`, `MAL_IP_STAGE_INVOKE` it returns `tcp://host1:port1`.
      - for `MAL_INTERACTIONTYPE_PUBSUB`, `MAL_IP_STAGE_PUBSUB_PUBLISH` it returns `tcp://*:(port1+1)`
      or `epgm://itf;mcast_addr:(port+1)`.
</code></pre>
<p>Functions for mapping MAL URI to ZMQ URI are given to the MALZMQ context through the malzmq_mapping_uri_t structure. If this
parameter is null the default functions defined in the MALZMQ transport are used; these functions consider that TCPis used for
all interactions and the port used for Publish/Subscribe interaction is the service port +1.</p>
<pre><code class="c">typedef mal_uri_t *malzmq_get_p2p_zmquri_fn(mal_uri_t *maluri);
typedef mal_uri_t *malzmq_get_ps_zmquri_fn(mal_uri_t *maluri);
typedef mal_uri_t *malzmq_getzmquri_to_fn(mal_message_t *message);

typedef struct _malzmq_mapping_uri_t malzmq_mapping_uri_t;

struct _malzmq_mapping_uri_t {
  malzmq_get_p2p_zmquri_fn *get_p2p_zmquri_fn;
  malzmq_get_ps_zmquri_fn *get_ps_zmquri_fn;
  malzmq_getzmquri_to_fn *getzmquri_to_fn;
};
</code></pre>

<h3 id="default-mapping">Default mapping</h3>
<p>The default mapping implemented in the POC for MALZMQ transport uses TCP communications for both Point-to-Point and
Publish/Subscribe:</p>
<pre><code>    - `malzmq_get_p2p_zmquri_fn`: for `malzmq://host:port/service` it returns `tcp://*:port`.
    - `malzmq_get_ps_zmquri_fn`: for `malzmq://host:port/service` it returns `tcp://host:port_ps`
    with `port_ps=port+1`.
    - `malzmq_getzmquri_to_fn`:
       - If the `interaction_type` and `interaction_stage` fields of the sent message are
       `MAL_INTERACTIONTYPE_PUBSUB` and `MAL_IP_STAGE_PUBSUB_PUBLISH`: for
        `malzmq://host1:port1/service it returns `tcp://host1:port1_ps` with
       `port1_ps=port1+1`
       - In all other cases: for `malzmq://host1:port1/service` it returns `tcp://host1:port1`.
</code></pre>
<h2 id="start-up">Start-up</h2>
<p>The following function will start the MALZMQ context. This function starts the zloop and blocks as the
zloop did not complete.</p>
<pre><code class="c">int malzmq_ctx_start(malzmq_ctx_t *self);
</code></pre>

<h2 id="zloop-behavior">zloop behavior</h2>
<p>The zloop listens (<code>SOCKET_MAL_ROUTER</code> and <code>SOCKET_MAL_SUB</code>) to the messages sent by remote MALZMQ
contexts. When ZMQ message is received, the following actions are performed:</p>
<pre><code>    - Gets and destroy of the first frame containing the identity of the caller (currently, the ZMQ
    connections are only used in one direction, therefore the identity of the caller is not retained).
    - The next frame is not extracted (zmsg_pop) from the ZMQ message, but only read (zmsg_next)
    enabling to send this ZMQ message to the recipient endpoint.
    - Only the `URI To` field is decoded, this field identifies the inproc `DEALER` socket used by the
    recipient endpoint.
    - The ZMQ message is forwarded to the recipient endpoint through the inproc `SOCKET_ACTOR_ROUTER`.
</code></pre>
<h2 id="message-receiving">Message receiving</h2>
<p>When a MAL endpoint asks for receiving a message, the MALZMQ transport listens on the corrsponding ZMQ DEALER socket
connected to the ZMQ ROUTER socket of the zloop.</p>
<p>When receiving a MAL message the following actions are performed:</p>
<pre><code>    - The unique frame of the ZMQ message is extracted.
    - A `mal_message` structure is instanciated.
    - The MAL header fields are decoded using MAL Binary encoding. The optional unencoded fields are set 
    using the global MALZMQ configuration header.
    - The MAL message body is directly set from the ZMQ frame (`data` field of `zframe`) without copy. 
    Consequently, the ZMQ frame can only be destroyed at the time of the destruction of MAL message. The
     `body_owner` field of the message is affected with the MAL ZMQ frame.
    - The built message is returned to the caller, the destruction of the MAL message is the responsibility
    of the handler of this message.
</code></pre>
<h2 id="virtual-function-to-build-uri">Virtual function to build URI</h2>
<p>The URI format is:</p>
<pre><code class="c">malzmq://&lt;hostname&gt;:&lt;port&gt;/&lt;id&gt;
</code></pre>

<p>The underlying transport protocol used by ZMQ is not specified in the URI. It is specified in the creation of MALZMQ context.</p>
<p>In some cases, the MALZMQ context could optimize communication using a more efficient transport protocol, for example:</p>
<pre><code>    - `ipc`: if both consumer and provider are on the same host.
    - `inproc`: if both consumer and provider are in the same process. Be careful in this case to the 
    starting order as *inproc* does not ensure the temporal decoupling for ZMQ sockets.
</code></pre>
<p>This optimization is not currently implemented in the prototype.</p>
<h2 id="virtual-function-to-create-an-endpoint">Virtual function to create an endpoint</h2>
<p>A MALZMQ endpoint is created and returned as an untyped pointer <code>void *</code>.</p>
<p>Specific MALZMQ endpoint datas are:</p>
<pre><code>    - the MALZMQ context,
    - the corresponding MAL endpoint,
    - the listening inproc ZMQ DEALER socket used to receive forwarded messages from the zloop,
    - an hashtable containing the ZMQ sockets open to the remote MALZMQ contexts.
</code></pre>
<p>During the initialization of the endpoint, the following actions are performed:</p>
<pre><code>    - creating a ZMQ DEALER socket,
    - registering this socket identity with the endpoint URI,
    - connection of this DEALER socket with the ROUTER socket handled by the zloop (ZLOOP_ENDPOINTS_SOCKET_URI)
</code></pre>
<h2 id="virtual-function-to-send-a-message">Virtual function to send a message</h2>
<p>The message's MAL URI is converted into a ZMQ URI:</p>
<pre><code>    - MAL URI format: `malzmq://&lt;hostname&gt;:&lt;port&gt;/&lt;id&gt;`
    - ZMQ URI format: `&lt;protocole zmq&gt;://&lt;hostname&gt;:&lt;port&gt;`
</code></pre>
<p>A ZMQ DEALER socket connected to this URI is searched in the hashtable owned by the endpoint. If the socket is not
found then a new one is created and registered in the table (the key is the ZMQ URI).</p>
<p>The MAL message is encoded and transmitted in a single frame ZMQ.</p>
<h2 id="virtual-function-to-create-a-poller">Virtual function to create a poller</h2>
<p>A MALZMQ poller is created and returned as an untyped pointer <code>void *</code>.</p>
<p>Specific MALZMQ poller datas are:</p>
<pre><code>    - the MALZMQ context,
    - the corresponding MAL poller,
    - the ZMQ zpoller listening on sockets of endpoints,
    - the list of endpoints associated to this poller.
</code></pre>
<p>During the initialization of the poller, the following actions are performed:</p>
<pre><code>    - creation of a ZMQ zpoller,
    - creation ofn empty list of endpoints.
</code></pre>
<h2 id="virtual-function-to-add-an-endpoint-to-a-poller">Virtual function to add an endpoint to a poller</h2>
<p>This function adds to the poller the endpoint in parameter. The end-point is added to the list of
endpoints, the corresponding socket is added to the zpoller.</p>
<h2 id="virtual-function-to-remove-an-endpoint-to-a-poller">Virtual function to remove an endpoint to a poller</h2>
<p>This function removes from the poller the endpoint in parameter. The end-point is removed from the
list of poller, the corresponding socket is removed from the zpoller.</p>
<h2 id="virtual-function-to-wait-a-message-on-a-poller">Virtual function to wait a message on a poller</h2>
<p>This function waits to receive a message on the associated zpoller.</p>
<p>If a message arrives before the timeout expiration the corresponding endpoint is searched in the
list of endpoints and is returned in the corresponding parameter. If there is no matching endpoint
registered an error is returned.</p>
<h2 id="virtual-function-to-delete-a-message">Virtual function to delete a message</h2>
<p>This function checks if the <code>body_owner</code> message field MAL is set. In this case, it means that the
MAL message was created (decoded) from a ZMQ frame (<code>zframe</code>) and must be destroyed (<code>zframe_destroy</code>).</p></div>
            
        </div>

        <footer class="col-md-12">
            <hr>
            
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script>
        <script>var base_url = '..';</script>
        <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
        <script src="../js/base.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                        <h4 class="modal-title" id="exampleModalLabel">Search</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            From here you can search these documents. Enter
                            your search terms below.
                        </p>
                        <form role="form">
                            <div class="form-group">
                                <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                            </div>
                        </form>
                        <div id="mkdocs-search-results"></div>
                    </div>
                    <div class="modal-footer">
                    </div>
                </div>
            </div>
        </div>

    </body>
</html>
